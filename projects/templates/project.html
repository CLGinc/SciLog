{% extends "base/base.html" %}
{% load staticfiles %}
{% block title %}Sci Log - Project Name{% endblock %}
{% block body %}
  <div class="layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
    {% include "base/top_header.html" %}
    {% include "base/drawer.html" %}
    <main class="mdl-layout__content">
      <div class="page-content mdl-grid">
        <div class="mdl-cell mdl-cell--12-col">
          <h1 class="mdl-typography--headline mdl-color-text--blue-500 subpageheader">
            {{ selected_project.name }}
            <p class="mdl-typography--caption mdl-color-text--blue-grey-500">Created on: {{ selected_project.datetime_created }}</p>
          </h1>
        </div>
        <div class="mdl-cell mdl-cell--9-col">
          <div class="mdl-card width--full">
            <div class="mdl-card__title mdl-color-text--blue-500 padding--left-none">
              <h2 class="mdl-card__title-text">Description</h2>
            </div>
            <div class="mdl-card__supporting-text mdl-color-text--blue-grey-900 padding--left-none">
              {{ selected_project.description }}
            </div>
          </div><div class="mdl-card width--full">
            <div class="mdl-card__title mdl-color-text--blue-500 padding--left-none">
              <h2 class="mdl-card__title-text">Results</h2>
            </div>
          	<ul class="mdl-list mdl-cell mdl-cell--12-col margin--left-0">
              {% for protocol, stats in protocols.items %}
          		<li class="mdl-grid mdl-grid--no-spacing mdl-list__item border--bottom margin--bottom-16">
          			<div class="mdl-grid mdl-grid--no-spacing mdl-cell mdl-cell--6-col mdl-list__item-primary-content protocol-list">
                  <div class="mdl-color-text--blue-500 mdl-typography--subhead mdl-cell mdl-cell--12-col">Name</div>
                  <div class="mdl-cell mdl-cell--12-col">{{ protocol.name }}</div>
                  <div class="mdl-color-text--blue-500 mdl-typography--subhead mdl-cell mdl-cell--12-col">Owner</div>
                  <div class="mdl-cell mdl-cell--12-col">{{ protocol.get_owner }}</div>
                  <div class="mdl-color-text--blue-500 mdl-typography--subhead mdl-cell mdl-cell--12-col">Label</div>
                  <div class="mdl-cell mdl-cell--12-col">{{ protocol.label }}</div>
          			</div>
          			<div class="mdl-grid mdl-grid--no-spacing mdl-cell mdl-cell--6-col mdl-list__item-primary-content protocol-list">
                  <div class="mdl-color-text--blue-500 mdl-typography--subhead mdl-cell mdl-cell--12-col">Experiments</div>
                  <div class="mdl-cell mdl-cell--4-col">Total: {{ stats.total }}</div>
                  <div class="mdl-cell mdl-cell--4-col">Completed: {{ stats.finished }}</div>
                  <div class="mdl-cell mdl-cell--4-col">Successful: {{ stats.successful }}</div>
                  <div class="mdl-color-text--blue-500 mdl-typography--subhead mdl-cell mdl-cell--12-col">Steps</div>
                  <div class="mdl-cell mdl-cell--12-col">{{ stats.procedures }}</div>
          			</div>
          		</li>
              {% endfor %}
          	</ul>
          </div>
          <div class="mdl-card mdl-cell mdl-cell--12-col">
            <div class="mdl-card__title mdl-color-text--blue-500 padding--left-none">
              <h2 class="mdl-card__title-text">Protocols</h2>
            </div>
          	<ul class="mdl-list">
              <li class="mdl-grid mdl-cell--hide-phone mdl-list__item border--bottom mdl-color-text--blue-500 padding--left-none">
                <div class="mdl-cell mdl-cell--7-col">Name</div>
                <div class="mdl-cell mdl-cell--4-col">Owner</div>
                <div class="mdl-cell mdl-cell--1-col">Label</div>
              </li>
              {% for protocol, stats in protocols.items %}
              <a href="/resultid/" class="links--wrap">
            		<li class="mdl-grid mdl-list__item border--bottom padding--left-none list--link">
                  <div class="mdl-cell mdl-cell--7-col">{{ protocol.name }}</div>
                  <div class="mdl-cell mdl-cell--4-col">{{ protocol.get_owner }}</div>
                  <div class="mdl-cell mdl-cell--1-col">{{ protocol.label }}</div>
            		</li>
              </a>
              {% endfor %}
          	</ul>
          </div>
          <div class="mdl-card width--full">
            <div class="mdl-card__title mdl-color-text--blue-500 padding--left-none">
              <h2 class="mdl-card__title-text">Sources</h2>
            </div>
            <div class="mdl-card__supporting-text mdl-color-text--blue-grey-900 padding--left-none">
              {% for source in selected_project.sources.all %}
                {{ source.name }}<br/>
                {{ source.url }}<br/>
                {{ source.isbn }}<br/>
              {% endfor %}
            </div>
          </div>
        </div>
        <div class="mdl-cell mdl-cell--3-col">
          <div class="mdl-card participant-list">
            <div class="mdl-card__title mdl-color-text--blue-500">
              <h2 class="mdl-card__title-text">Participants</h2>
            </div>
            <div class="mdl-card__supporting-text">
              <ul class="mdl-list margin--none padding--top-none">
                {% for role_value, roles in participants_by_role %}
                <li class="mdl-list__item padding--left-none padding--top-none">{{ role_value }}</li>
                  {% for role in roles %}
                  <a class="links--wrap" href="/userid/">
                    <li class="mdl-list__item padding--left-none padding--top-none participant-list--link">
                      <span class="mdl-list__item-primary-content">
                        <img class="participant-list--avatar" src="/static/front/img/ninja.png">
                          <span>{{ role.researcher }}</span>
                      </span>
                    </li>
                  </a>
                  {% endfor %}
                {% endfor %}
              </ul>
            </div>
            <div class="mdl-card__actions mdl-card--border">
              <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-color-text--blue-grey-600">
                <i class="material-icons mdl-color-text--blue-500">expand_more</i>
                See all participants
              </a>
            </div>
          </div>
        </div>
      </div>
      {% include "base/scroll_top.html" %}
    </main>
  </div>
{% endblock %}
{% block post_load %}
  <script type = "text/javascript" src="{% static "front/js/ajax.js" %}"></script>
  <script type = "text/javascript" src="{% static "front/js/infiniteScroll.js" %}"></script>
{% endblock %}
