{% extends "base/base.html" %}
{% load staticfiles %}
{% block title %}Sci Log - Project Name{% endblock %}
{% block body %}
  <div class="layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
    {% include "base/top_header.html" %}
    {% include "base/drawer.html" %}
    <main class="mdl-layout__content">
      <div class="page-content mdl-grid">
        <div class="mdl-cell mdl-cell--12-col">
          <h1 class="mdl-typography--headline mdl-color-text--blue-500 subpageheader">
            {{ selected_project.name }}
            <p class="mdl-typography--caption mdl-color-text--blue-grey-500">Created on: {{ selected_project.datetime_created }}</p>
          </h1>
        </div>
        <div class="mdl-cell mdl-cell--9-col">
          <div class="mdl-card width--full">
            <div class="mdl-card__title mdl-color-text--blue-500 padding--left-none">
              <h2 class="mdl-card__title-text">Description</h2>
            </div>
            <div class="mdl-card__supporting-text mdl-color-text--blue-grey-900 padding--left-none">
              {{ selected_project.description }}
            </div>
          </div>
          {% if selected_project.results %}
          <div class="mdl-card mdl-cell mdl-cell--12-col">
            <div class="mdl-card__title mdl-color-text--blue-500 padding--left-none">
              <h2 class="mdl-card__title-text">Results</h2>
            </div>
            <div class="mdl-card__actions">
              <a class="mdl-button mdl-color-text--blue-grey-600 mdl-js-button mdl-js-ripple-effect right">
                <i class="material-icons mdl-color-text--blue-500">playlist_add</i> Add result
              </a>
            </div>
          	<ul class="mdl-list margin--bottom-0">
              <li class="mdl-grid mdl-grid--no-spacing mdl-cell--hide-phone mdl-list__item border--bottom mdl-color-text--blue-500">
                <div class="mdl-grid mdl-cell mdl-cell--11-col">
                  <div class="mdl-cell mdl-cell--4-col">Protocol</div>
                  <div class="mdl-cell mdl-cell--3-col">Last modified</div>
                  <div class="mdl-cell mdl-cell--3-col">Created on</div>
                  <div class="mdl-cell mdl-cell--1-col">State</div>
                  <div class="mdl-cell mdl-cell--1-col">Success</div>
                </div>
                <div class="mdl-grid mdl-cell mdl-cell--1-col">
                  <div class="mdl-cell mdl-cell--1-col">Modify</div>
                </div>
              </li>
              {% for result in selected_project.results.all %}
          		<li class="mdl-list__item border--bottom mdl-grid mdl-grid--no-spacing">
                <a href="/resultid/" class="links--wrap mdl-grid mdl-cell mdl-cell--11-col list--link">
                  <div class="mdl-cell mdl-cell--4-col">{{ result.protocol }}</div>
                  <div class="mdl-cell mdl-cell--3-col">{{ result.datetime_created }}</div>
                  <div class="mdl-cell mdl-cell--3-col">{{ result.datetime_created }}</div>
                  <div class="mdl-cell mdl-cell--1-col">{{ result.state }}</div>
                  {% if result.is_successful == True %}
                  <div class="mdl-cell mdl-cell--1-col mdl-color-text--green-600 mdl-typography--text-center">Yes</div>
                  {% else %}
                  <div class="mdl-cell mdl-cell--1-col mdl-color-text--pink-600 mdl-typography--text-center">No</div>
                  {% endif %}
                </a>
                <div class="mdl-grid mdl-cell mdl-cell--1-col mdl-cell--12-col-phone">
                  <button class="mdl-button mdl-js-button mdl-button--icon mdl-color-text--blue-grey-600">
                    <i class="material-icons list--link-edit">edit</i>
                  </button>
                  <button class="mdl-button mdl-js-button mdl-button--icon mdl-color-text--blue-grey-600">
                    <i class="material-icons list--link-remove">clear</i>
                  </button>
                </div>
          		</li>
              {% endfor %}
          	</ul>
            <div class="mdl-card__actions">
              <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-color-text--blue-grey-600">
                <i class="material-icons mdl-color-text--blue-500">expand_more</i>
                See all results
              </a>
            </div>
          </div>
          {% endif %}
          {% if selected_project.protocols %}
          <div class="mdl-card mdl-cell mdl-cell--12-col">
            <div class="mdl-card__title mdl-color-text--blue-500 padding--left-none">
              <h2 class="mdl-card__title-text">Protocols</h2>
            </div>
            <div class="mdl-card__actions">
              <a class="mdl-button mdl-color-text--blue-grey-600 mdl-js-button mdl-js-ripple-effect right">
                <i class="material-icons mdl-color-text--blue-500">playlist_add</i> Add protocol
              </a>
            </div>
          	<ul class="mdl-list margin--bottom-0">
              <li class="mdl-grid mdl-grid--no-spacing mdl-cell--hide-phone mdl-list__item border--bottom mdl-color-text--blue-500">
                <div class="mdl-grid mdl-cell mdl-cell--11-col">
                  <div class="mdl-cell mdl-cell--7-col">Name</div>
                  <div class="mdl-cell mdl-cell--4-col">Owner</div>
                  <div class="mdl-cell mdl-cell--1-col">Label</div>
                </div>
                <div class="mdl-grid mdl-cell mdl-cell--1-col">
                  <div class="mdl-cell mdl-cell--1-col">Modify</div>
                </div>
              </li>
              {% for protocol in selected_project.protocols.all %}
          		<li class="mdl-list__item border--bottom mdl-grid mdl-grid--no-spacing">
                <a href="/resultid/" class="links--wrap mdl-grid mdl-cell mdl-cell--11-col list--link">
                  <div class="mdl-cell mdl-cell--7-col">{{ protocol.name }}</div>
                  <div class="mdl-cell mdl-cell--4-col">{{ protocol.get_owner }}</div>
                  <div class="mdl-cell mdl-cell--1-col">{{ protocol.label }}</div>
                </a>
                <div class="mdl-grid mdl-cell mdl-cell--1-col mdl-cell--12-col-phone">
                  <button class="mdl-button mdl-js-button mdl-button--icon mdl-color-text--blue-grey-600">
                    <i class="material-icons list--link-edit">edit</i>
                  </button>
                  <button class="mdl-button mdl-js-button mdl-button--icon mdl-color-text--blue-grey-600">
                    <i class="material-icons list--link-remove">clear</i>
                  </button>
                </div>
          		</li>
              {% endfor %}
          	</ul>
            <div class="mdl-card__actions">
              <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-color-text--blue-grey-600">
                <i class="material-icons mdl-color-text--blue-500">expand_more</i>
                See all protocols
              </a>
            </div>
          </div>
          {% endif %}
          {% if selected_project.sources %}
          <div class="mdl-card mdl-cell mdl-cell--12-col">
            <div class="mdl-card__title mdl-color-text--blue-500 padding--left-none">
              <h2 class="mdl-card__title-text">Sources</h2>
            </div>
            <div class="mdl-card__actions">
              <a class="mdl-button mdl-color-text--blue-grey-600 mdl-js-button mdl-js-ripple-effect right">
                <i class="material-icons mdl-color-text--blue-500">playlist_add</i> Add source
              </a>
            </div>
          	<ul class="mdl-list margin--bottom-0">
              <li class="mdl-grid mdl-grid--no-spacing mdl-cell--hide-phone mdl-list__item border--bottom mdl-color-text--blue-500">
                <div class="mdl-grid mdl-cell mdl-cell--9-col">
                  <div class="mdl-cell mdl-cell--8-col">Name</div>
                  <div class="mdl-cell mdl-cell--4-col">ISBN</div>
                </div>
                <div class="mdl-grid mdl-cell mdl-cell--2-col">
                  <div class="mdl-cell mdl-cell--7-col">Url</div>
                </div>
                <div class="mdl-grid mdl-cell mdl-cell--1-col">
                  <div class="mdl-cell mdl-cell--1-col">Modify</div>
                </div>
              </li>
              {% for source in selected_project.sources.all %}
          		<li class="mdl-list__item border--bottom mdl-grid mdl-grid--no-spacing">
                <a href="/resultid/" class="links--wrap mdl-grid mdl-cell mdl-cell--9-col list--link">
                  <div class="mdl-cell mdl-cell--8-col">{{ source.name }}</div>
                  <div class="mdl-cell mdl-cell--4-col">{{ source.isbn }}</div>
                </a>
                <div class="links--wrap mdl-grid mdl-cell mdl-cell--2-col list--link">
                  <a href="{{ source.url }}" target="_blank" class="links--wrap mdl-cell mdl-cell--12-col">
                    {% if source.url %}
                    Visit site
                    {% endif %}
                  </a>
                </div>
                <div class="links--wrap mdl-grid mdl-cell mdl-cell--1-col mdl-cell--12-col-phone">
                  <button class="mdl-button mdl-js-button mdl-button--icon mdl-color-text--blue-grey-600">
                    <i class="material-icons list--link-edit">edit</i>
                  </button>
                  <button class="mdl-button mdl-js-button mdl-button--icon mdl-color-text--blue-grey-600">
                    <i class="material-icons list--link-remove">clear</i>
                  </button>
                </div>
          		</li>
              {% endfor %}
          	</ul>
            <div class="mdl-card__actions">
              <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-color-text--blue-grey-600">
                <i class="material-icons mdl-color-text--blue-500">expand_more</i>
                See all sources
              </a>
            </div>
          </div>
          {% endif %}
        </div>
        <div class="mdl-cell mdl-cell--3-col">
          <div class="mdl-card participant-list">
            <div class="mdl-card__title mdl-color-text--blue-500">
              <h2 class="mdl-card__title-text">Participants</h2>
            </div>
            <div class="mdl-card__supporting-text">
              <ul class="mdl-list margin--none padding--top-none">
                {% for role_value, roles in participants_by_role %}
                <li class="mdl-list__item padding--left-none padding--top-none">{{ role_value }}</li>
                  {% for role in roles %}
                  <a class="links--wrap" href="/userid/">
                    <li class="mdl-list__item padding--left-none padding--top-none participant-list--link">
                      <span class="mdl-list__item-primary-content">
                        <img class="participant-list--avatar" src="/static/front/img/ninja.png">
                          <span>{{ role.researcher }}</span>
                      </span>
                    </li>
                  </a>
                  {% endfor %}
                {% endfor %}
              </ul>
            </div>
            <div class="mdl-card__actions mdl-card--border">
              <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-color-text--blue-grey-600">
                <i class="material-icons mdl-color-text--blue-500">expand_more</i>
                See all participants
              </a>
            </div>
          </div>
        </div>
      </div>
      {% include "base/scroll_top.html" %}
    </main>
  </div>
{% endblock %}
{% block post_load %}
  <script type = "text/javascript" src="{% static "front/js/ajax.js" %}"></script>
  <script type = "text/javascript" src="{% static "front/js/infiniteScroll.js" %}"></script>
{% endblock %}
