{% extends "base/base.html" %}
{% load staticfiles %}
{% block title %}Sci Log - New result{% endblock %}
{% block body %}
{% include "base/toolbar.html" %}
{% load protocol_extras %}
<div class="content">
{% include "base/drawer.html" %}
  <div class="main-grid mdc-layout-grid">
    <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-9">
      <h1 class="mdc-typography--headline mdl-color-text--blue-500 subpageheader">
        Result details
      </h1>
    </div>
    <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-3">
      <a data-mdc-auto-init="MDCRipple"
         href="{% url 'update_protocol_result' protocol_uuid=selected_protocol_result.protocol.pk result_uuid=selected_protocol_result.pk %}"
         class="mdc-button mdl-color-text--blue-grey-600 subpageheader right">
        <i class="material-icons mdl-color-text--blue-500">playlist_add</i> Edit result
      </a>
    </div>
    <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12">
      <div class="mdc-layout-grid mdc-layout-grid__cell mdc-layout-grid__cell--span-12 margin--none padding-0">
        <div class="mdc-layout-grid mdc-layout-grid__cell mdc-layout-grid__cell--span-3 margin--none padding-0">
          <p class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12 mdl-color-text--light-blue-500 mdc-typography--subhead">Success</p>
          <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12 margin--none">
            {% if selected_protocol_result.is_successful %}
            Yes
            {% else %}
            No
            {% endif %}
          </div>
        </div>
        <div class="mdc-layout-grid mdc-layout-grid__cell mdc-layout-grid__cell--span-3 margin--none padding-0">
          <p class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12 mdl-color-text--light-blue-500 mdc-typography--subhead">State</p>
          <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12 margin--none">
            {{ selected_protocol_result.get_state_display }}
          </div>
        </div>
        {% if selected_protocol_result.project.name %}
        <div class="mdc-layout-grid mdc-layout-grid__cell mdc-layout-grid__cell--span-3 margin--none padding-0">
          <p class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12 mdl-color-text--light-blue-500 mdc-typography--subhead">Linked to project</p>
          <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12 margin--none">
            {{ selected_protocol_result.project.name }}
          </div>
        </div>
        {% endif %}
        <div class="mdc-layout-grid mdc-layout-grid__cell mdc-layout-grid__cell--span-3 margin--none padding-0">
          <p class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12 mdl-color-text--light-blue-500 mdc-typography--subhead">Linked protocol</p>
          <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12 margin--none">
            {{ selected_protocol_result.protocol.name }}
          </div>
        </div>
      </div>
      {% if selected_protocol_result.note %}
      <div class="mdc-layout-grid mdc-layout-grid__cell mdc-layout-grid__cell--span-12 margin--none padding--top-24 padding-0">
        <div class="mdc-layout-grid mdc-layout-grid__cell mdc-layout-grid__cell--span-6 margin--none padding-0">
          <p class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12 mdl-color-text--light-blue-500 mdc-typography--subhead">Result note</p>
          <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12 margin--none">
            {{ selected_protocol_result.note }}
          </div>
        </div>
      </div>
      {% endif %}
      <div class="mdc-layout-grid mdc-layout-grid__cell mdc-layout-grid__cell--span-12 margin--none padding--top-24 padding-0">
        <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-12 mdl-color-text--light-blue-500 mdc-typography--subhead">
          <span>Data tables</span>
        </div>
      </div>
      {% for data_column in selected_protocol_result.data_columns.data_columns %}
      <div class="left margin--8">
        <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp">
          {% if data_column.title %}
          <thead>
            <tr>
              <th class="mdl-data-table__cell--non-numeric" colspan="2">Title</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="mdl-data-table__cell--non-numeric" colspan="2">
                {{ data_column.title }}
              </td>
            </tr>
          </tbody>
          {% endif %}
          <thead>
            <tr>
              <th class="mdl-data-table__cell--non-numeric">Measurement</th>
              <th class="mdl-data-table__cell--non-numeric">Unit</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="mdl-data-table__cell--non-numeric">
                {{ data_column.measurement }}
              </td>
              <td class="mdl-data-table__cell--non-numeric">
                {{ data_column.unit }}
              </td>
            </tr>
          </tbody>
          <thead>
            <tr>
              <th {% if data_column.data.Type != 'Number' %}class="mdl-data-table__cell--non-numeric"{% endif %} colspan="2">Data ({{ data_column.data.Type }})</th>
            </tr>
          </thead>
          <tbody>
            {% for data_value in data_column.data %}
              <tr>
                <td {% if selected_protocol_result.data_type != 'number' %}class="mdl-data-table__cell--non-numeric"{% endif %} colspan="2">
                  {{ data_value }}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% endfor %}
    </div>
  </div>
</div>
<div id="modal--attachments" class="modal visible mdc-layout-grid">
  <div class="article--modal padding-0 mdc-elevation--z16 mdc-layout-grid__cell mdc-layout-grid__cell--span-12">
    <header class="mdc-toolbar mdl-color--blue-500 mdc-elevation--z2">
      <div class="mdc-toolbar__row padding-16">
        <section class="mdc-toolbar__section mdc-toolbar__section--align-start">
          <a data-mdc-auto-init="MDCRipple"

             data-target="modal--attachments"
             class="mdc-button mdl-color-text--white">
            <i class="material-icons">close</i>
            <span class="toolbar__button-label">Cancel</span>
          </a>
        </section>
        <section class="mdc-toolbar__section">
          <span class="mdc-toolbar__title">Select files to attach</span>
        </section>
        <section class="mdc-toolbar__section mdc-toolbar__section--align-end">
          <button data-mdc-auto-init="MDCRipple"
                  data-form="create_protocol_result_form"
                  class="mdc-button mdl-color-text--white">
            <i class="material-icons">check</i>
            <span class="toolbar__button-label">Done</span>
          </button>
        </section>
      </div>
    </header>
    <div id="add_attachments" class="modal--content">
      <form action="/file-upload" class="dropzone">
        <div class="fallback">
          <input name="file" type="file" multiple />
        </div>
      </form>
    </div>
  </div>
</div>
<button data-mdc-auto-init="MDCRipple"
        data-trigger="show"
        data-target="modal--attachments"
        id="button-add"
        class="button--attachments mdc-fab mdc-fab--mini material-icons mdl-color--blue-500">
  <span  class="mdc-fab__icon">cloud_upload</span>
</button>
<div class="mdc-snackbar mdl-color--blue-500"
     aria-live="assertive"
     aria-atomic="true"
     aria-hidden="true" id="mdc-js-snackbar">
  <div class="mdc-snackbar__text"></div>
  <div class="mdc-snackbar__action-wrapper">
    <button type="button" class="mdc-button mdc-snackbar__action-button"></button>
  </div>
</div>
{% include "base/scroll_top.html" %}
{% endblock %}
{% block post_load %}
<script type = "text/javascript" src="{% static "front/js/ajax.js" %}"></script>
<script type = "text/javascript" src="{% static "front/js/triggers.js" %}"></script>
{% endblock %}
